{"ast":null,"code":"var _jsxFileName = \"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/src/components/AuthProvider/AuthProvider.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { message } from \"antd\";\nimport { API, BEARER } from \"../../constant\";\nimport { useEffect } from \"react\";\nimport { getToken } from \"../../helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [userData, setUserData] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const authToken = getToken();\n  const fetchLoggedInUser = async token => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API}/users/me`, {\n        headers: {\n          Authorization: `${BEARER} ${token}`\n        }\n      });\n      const data = await response.json();\n      setUserData(data);\n    } catch (error) {\n      console.error(error);\n      message.error(\"Error While Getting Logged In User Details\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleUser = user => {\n    setUserData(user);\n  };\n  useEffect(() => {\n    if (authToken) {\n      fetchLoggedInUser(authToken);\n    }\n  }, [authToken]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user: userData,\n      setUser: handleUser,\n      isLoading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"HCDE8p7VbT+fY6xEFDDtu36jh6Y=\");\n_c = AuthProvider;\nexport default AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","AuthContext","message","API","BEARER","useEffect","getToken","jsxDEV","_jsxDEV","AuthProvider","_ref","_s","children","userData","setUserData","isLoading","setIsLoading","authToken","fetchLoggedInUser","token","response","fetch","headers","Authorization","data","json","error","console","handleUser","user","Provider","value","setUser","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote ðŸŒŽ/Options/Coding/Projects/shop/client/src/components/AuthProvider/AuthProvider.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { message } from \"antd\";\nimport { API, BEARER } from \"../../constant\";\nimport { useEffect } from \"react\";\nimport { getToken } from \"../../helpers\";\n\nconst AuthProvider = ({ children }) => {\n  const [userData, setUserData] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const authToken = getToken();\n\n  const fetchLoggedInUser = async (token) => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API}/users/me`, {\n        headers: { Authorization: `${BEARER} ${token}` },\n      });\n      const data = await response.json();\n\n      setUserData(data);\n    } catch (error) {\n      console.error(error);\n      message.error(\"Error While Getting Logged In User Details\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleUser = (user) => {\n    setUserData(user);\n  };\n\n  useEffect(() => {\n    if (authToken) {\n      fetchLoggedInUser(authToken);\n    }\n  }, [authToken]);\n\n  return (\n    <AuthContext.Provider\n      value={{ user: userData, setUser: handleUser, isLoading }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,OAAO,QAAQ,MAAM;AAC9B,SAASC,GAAG,EAAEC,MAAM,QAAQ,gBAAgB;AAC5C,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzC,MAAMC,YAAY,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAF,IAAA;EAChC,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,EAAE;EAC1C,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAMiB,SAAS,GAAGX,QAAQ,EAAE;EAE5B,MAAMY,iBAAiB,GAAG,MAAOC,KAAK,IAAK;IACzCH,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAElB,GAAI,WAAU,EAAE;QAC9CmB,OAAO,EAAE;UAAEC,aAAa,EAAG,GAAEnB,MAAO,IAAGe,KAAM;QAAE;MACjD,CAAC,CAAC;MACF,MAAMK,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,EAAE;MAElCX,WAAW,CAACU,IAAI,CAAC;IACnB,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpBxB,OAAO,CAACwB,KAAK,CAAC,4CAA4C,CAAC;IAC7D,CAAC,SAAS;MACRV,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMY,UAAU,GAAIC,IAAI,IAAK;IAC3Bf,WAAW,CAACe,IAAI,CAAC;EACnB,CAAC;EAEDxB,SAAS,CAAC,MAAM;IACd,IAAIY,SAAS,EAAE;MACbC,iBAAiB,CAACD,SAAS,CAAC;IAC9B;EACF,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EAEf,oBACET,OAAA,CAACP,WAAW,CAAC6B,QAAQ;IACnBC,KAAK,EAAE;MAAEF,IAAI,EAAEhB,QAAQ;MAAEmB,OAAO,EAAEJ,UAAU;MAAEb;IAAU,CAAE;IAAAH,QAAA,EAEzDA;EAAQ;IAAAqB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACY;AAE3B,CAAC;AAACzB,EAAA,CAxCIF,YAAY;AAAA4B,EAAA,GAAZ5B,YAAY;AA0ClB,eAAeA,YAAY;AAAC,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}