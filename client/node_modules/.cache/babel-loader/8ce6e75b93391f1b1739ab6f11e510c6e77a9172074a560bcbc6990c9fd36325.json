{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Alert,Button,Card,Col,Form,Input,message,Row,Spin,Typography}from\"antd\";import React,{Fragment,useState}from\"react\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{useAuthContext}from\"../../context/AuthContext\";import useScreenSize from\"../../hooks/useScreenSize\";import{API}from\"../../constant\";import{setToken}from\"../../helpers\";import\"./register.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useScreenSize=useScreenSize(),isDesktopView=_useScreenSize.isDesktopView;var navigate=useNavigate();var _useAuthContext=useAuthContext(),setUser=_useAuthContext.setUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var onFinish=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var response,data,_error$message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch(\"\".concat(API,\"/auth/local/register\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(values)});case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;if(!(data!==null&&data!==void 0&&data.error)){_context.next=12;break;}throw data===null||data===void 0?void 0:data.error;case 12:// set the token\nsetToken(data.jwt);// set the user\nsetUser(data.user);message.success(\"Welcome to Social Cards \".concat(data.user.username,\"!\"));navigate(\"/profile\",{replace:true});case 16:_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setError((_error$message=_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)!==null&&_error$message!==void 0?_error$message:\"Something went wrong!\");case 22:_context.prev=22;setIsLoading(false);return _context.finish(22);case 25:case\"end\":return _context.stop();}},_callee,null,[[1,18,22,25]]);}));return function onFinish(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Row,{align:\"middle\",children:/*#__PURE__*/_jsx(Col,{span:isDesktopView?8:24,offset:isDesktopView?8:0,children:/*#__PURE__*/_jsxs(Card,{className:\"registerCard\",bordered:false,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"registerCard-title fade-in\",children:\"Register\"}),error?/*#__PURE__*/_jsx(Alert,{className:\"alert_error\",message:error,type:\"error\",closable:true,afterClose:function afterClose(){return setError(\"\");}}):null,/*#__PURE__*/_jsxs(Form,{className:\"registerForm\",layout:\"vertical\",onFinish:onFinish,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Username\",name:\"username\",rules:[{// required: true,\ntype:\"string\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Username\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Email\",name:\"email\",rules:[{// required: true,\ntype:\"email\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Email address\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Password\",name:\"password\"// rules={[{ required: true }]}\n,children:/*#__PURE__*/_jsx(Input.Password,{placeholder:\"Password\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsxs(\"button\",{className:\"registerButton\",htmlType:\"submit\",children:[\"CREATE ACCOUNT \",isLoading&&/*#__PURE__*/_jsx(Spin,{size:\"small\"})]})})]}),/*#__PURE__*/_jsx(Typography.Paragraph,{className:\"form_help_text\",children:\"Already have an account?\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"registerButton\",htmlType:\"submit\",children:\"LOGIN\"})})]})})})});};export default Register;","map":{"version":3,"names":["Alert","Button","Card","Col","Form","Input","message","Row","Spin","Typography","React","Fragment","useState","Link","useNavigate","useAuthContext","useScreenSize","API","setToken","jsx","_jsx","jsxs","_jsxs","Register","_useScreenSize","isDesktopView","navigate","_useAuthContext","setUser","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","setError","onFinish","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","response","data","_error$message","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","body","JSON","stringify","sent","json","jwt","user","success","username","replace","t0","console","finish","stop","_x","apply","arguments","children","align","span","offset","className","bordered","type","closable","afterClose","layout","autoComplete","Item","label","name","rules","placeholder","Password","htmlType","size","Paragraph","to"],"sources":["/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote ðŸŒŽ/Options/Coding/Projects/shop/client/src/pages/Register/Register.jsx"],"sourcesContent":["import {\n  Alert,\n  Button,\n  Card,\n  Col,\n  Form,\n  Input,\n  message,\n  Row,\n  Spin,\n  Typography,\n} from \"antd\";\nimport React, { Fragment, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuthContext } from \"../../context/AuthContext\";\nimport useScreenSize from \"../../hooks/useScreenSize\";\nimport { API } from \"../../constant\";\nimport { setToken } from \"../../helpers\";\nimport \"./register.scss\";\n\nconst Register = () => {\n  const { isDesktopView } = useScreenSize();\n  const navigate = useNavigate();\n\n  const { setUser } = useAuthContext();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [error, setError] = useState(\"\");\n\n  const onFinish = async (values) => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API}/auth/local/register`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(values),\n      });\n\n      const data = await response.json();\n      if (data?.error) {\n        throw data?.error;\n      } else {\n        // set the token\n        setToken(data.jwt);\n\n        // set the user\n        setUser(data.user);\n\n        message.success(`Welcome to Social Cards ${data.user.username}!`);\n\n        navigate(\"/profile\", { replace: true });\n      }\n    } catch (error) {\n      console.error(error);\n      setError(error?.message ?? \"Something went wrong!\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Fragment>\n      <Row align=\"middle\">\n        <Col span={isDesktopView ? 8 : 24} offset={isDesktopView ? 8 : 0}>\n          <Card className=\"registerCard\" bordered={false}>\n            <h1 className=\"registerCard-title fade-in\">Register</h1>\n            {error ? (\n              <Alert\n                className=\"alert_error\"\n                message={error}\n                type=\"error\"\n                closable\n                afterClose={() => setError(\"\")}\n              />\n            ) : null}\n            <Form\n              className=\"registerForm\"\n              layout=\"vertical\"\n              onFinish={onFinish}\n              autoComplete=\"off\"\n            >\n              <Form.Item\n                label=\"Username\"\n                name=\"username\"\n                rules={[\n                  {\n                    // required: true,\n                    type: \"string\",\n                  },\n                ]}\n              >\n                <Input placeholder=\"Username\" />\n              </Form.Item>\n              <Form.Item\n                label=\"Email\"\n                name=\"email\"\n                rules={[\n                  {\n                    // required: true,\n                    type: \"email\",\n                  },\n                ]}\n              >\n                <Input placeholder=\"Email address\" />\n              </Form.Item>\n\n              <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                // rules={[{ required: true }]}\n              >\n                <Input.Password placeholder=\"Password\" />\n              </Form.Item>\n\n              <Form.Item>\n                <button className=\"registerButton\" htmlType=\"submit\">\n                  CREATE ACCOUNT {isLoading && <Spin size=\"small\" />}\n                </button>\n              </Form.Item>\n            </Form>\n            <Typography.Paragraph className=\"form_help_text\">\n              Already have an account?\n            </Typography.Paragraph>\n            <Link to=\"/login\">\n              <button className=\"registerButton\" htmlType=\"submit\">\n                LOGIN\n              </button>\n            </Link>\n          </Card>\n        </Col>\n      </Row>\n    </Fragment>\n  );\n};\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}