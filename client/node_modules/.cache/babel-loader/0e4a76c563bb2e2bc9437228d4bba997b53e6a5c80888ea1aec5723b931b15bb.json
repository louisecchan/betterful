{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote \\uD83C\\uDF0E/Options/Coding/Projects/shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Alert,// Button,\nCard,Col,Form,Input,message,Row,Spin,Typography}from\"antd\";import React,{Fragment,useState}from\"react\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{useAuthContext}from\"../../context/AuthContext\";import useScreenSize from\"../../hooks/useScreenSize\";import{API}from\"../../constant\";import{setToken}from\"../../helpers\";import\"./login.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useScreenSize=useScreenSize(),isDesktopView=_useScreenSize.isDesktopView;var navigate=useNavigate();var _useAuthContext=useAuthContext(),setUser=_useAuthContext.setUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var onFinish=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var value,response,data,_error$message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;value={identifier:values.email,password:values.password};_context.next=5;return fetch(\"\".concat(API,\"/auth/local\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(value)});case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;if(!(data!==null&&data!==void 0&&data.error)){_context.next=13;break;}throw data===null||data===void 0?void 0:data.error;case 13:// set the token\nsetToken(data.jwt);// set the user\nsetUser(data.user);message.success(\"Welcome back \".concat(data.user.username,\"!\"));navigate(\"/profile\",{replace:true});case 17:_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setError((_error$message=_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)!==null&&_error$message!==void 0?_error$message:\"Something went wrong!\");case 23:_context.prev=23;setIsLoading(false);return _context.finish(23);case 26:case\"end\":return _context.stop();}},_callee,null,[[1,19,23,26]]);}));return function onFinish(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Row,{align:\"middle\",children:/*#__PURE__*/_jsx(Col,{span:isDesktopView?8:24,offset:isDesktopView?8:0,children:/*#__PURE__*/_jsxs(Card,{className:\"loginCard\",bordered:false,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"loginCard-title fade-in\",children:\"Log in\"}),error?/*#__PURE__*/_jsx(Alert,{className:\"alert_error\",message:error,type:\"error\",closable:true,afterClose:function afterClose(){return setError(\"\");}}):null,/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",onFinish:onFinish,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Email\",name:\"email\",rules:[{type:\"email\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Email address\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Password\",name:\"password\"// rules={[{ required: true }]}\n,children:/*#__PURE__*/_jsx(Input.Password,{placeholder:\"Password\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsxs(\"button\",{className:\"loginButton\",htmlType:\"submit\",children:[\"LOGIN \",isLoading&&/*#__PURE__*/_jsx(Spin,{size:\"small\"})]})})]}),/*#__PURE__*/_jsx(Typography.Paragraph,{className:\"form_help_text\",children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsx(\"button\",{className:\"loginButton\",htmlType:\"submit\",children:\"CREATE ACCOUNT\"})})]})})})});};export default Login;","map":{"version":3,"names":["Alert","Card","Col","Form","Input","message","Row","Spin","Typography","React","Fragment","useState","Link","useNavigate","useAuthContext","useScreenSize","API","setToken","jsx","_jsx","jsxs","_jsxs","Login","_useScreenSize","isDesktopView","navigate","_useAuthContext","setUser","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","setError","onFinish","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","value","response","data","_error$message","wrap","_callee$","_context","prev","next","identifier","email","password","fetch","concat","method","headers","body","JSON","stringify","sent","json","jwt","user","success","username","replace","t0","console","finish","stop","_x","apply","arguments","children","align","span","offset","className","bordered","type","closable","afterClose","layout","autoComplete","Item","label","name","rules","placeholder","Password","htmlType","size","Paragraph","to"],"sources":["/Users/chanchinghei/Library/Mobile Documents/com~apple~CloudDocs/Documents/Work/Fully Remote ðŸŒŽ/Options/Coding/Projects/shop/client/src/pages/Login/Login.jsx"],"sourcesContent":["import {\n  Alert,\n  // Button,\n  Card,\n  Col,\n  Form,\n  Input,\n  message,\n  Row,\n  Spin,\n  Typography,\n} from \"antd\";\nimport React, { Fragment, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuthContext } from \"../../context/AuthContext\";\nimport useScreenSize from \"../../hooks/useScreenSize\";\nimport { API } from \"../../constant\";\nimport { setToken } from \"../../helpers\";\nimport \"./login.scss\";\n\nconst Login = () => {\n  const { isDesktopView } = useScreenSize();\n  const navigate = useNavigate();\n\n  const { setUser } = useAuthContext();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [error, setError] = useState(\"\");\n\n  const onFinish = async (values) => {\n    setIsLoading(true);\n    try {\n      const value = {\n        identifier: values.email,\n        password: values.password,\n      };\n      const response = await fetch(`${API}/auth/local`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(value),\n      });\n\n      const data = await response.json();\n      if (data?.error) {\n        throw data?.error;\n      } else {\n        // set the token\n        setToken(data.jwt);\n\n        // set the user\n        setUser(data.user);\n\n        message.success(`Welcome back ${data.user.username}!`);\n\n        navigate(\"/profile\", { replace: true });\n      }\n    } catch (error) {\n      console.error(error);\n      setError(error?.message ?? \"Something went wrong!\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Fragment>\n      <Row align=\"middle\">\n        <Col span={isDesktopView ? 8 : 24} offset={isDesktopView ? 8 : 0}>\n          <Card className=\"loginCard\" bordered={false}>\n            <h1 className=\"loginCard-title fade-in\">Log in</h1>\n            {error ? (\n              <Alert\n                className=\"alert_error\"\n                message={error}\n                type=\"error\"\n                closable\n                afterClose={() => setError(\"\")}\n              />\n            ) : null}\n            <Form layout=\"vertical\" onFinish={onFinish} autoComplete=\"off\">\n              <Form.Item\n                label=\"Email\"\n                name=\"email\"\n                rules={[\n                  {\n                    type: \"email\",\n                  },\n                ]}\n              >\n                <Input placeholder=\"Email address\" />\n              </Form.Item>\n\n              <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                // rules={[{ required: true }]}\n              >\n                <Input.Password placeholder=\"Password\" />\n              </Form.Item>\n\n              <Form.Item>\n                <button className=\"loginButton\" htmlType=\"submit\">\n                  LOGIN {isLoading && <Spin size=\"small\" />}\n                </button>\n              </Form.Item>\n            </Form>\n            <Typography.Paragraph className=\"form_help_text\">\n              Don't have an account?\n            </Typography.Paragraph>\n            <Link to=\"/register\">\n              <button className=\"loginButton\" htmlType=\"submit\">\n                CREATE ACCOUNT\n              </button>\n            </Link>\n          </Card>\n        </Col>\n      </Row>\n    </Fragment>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}